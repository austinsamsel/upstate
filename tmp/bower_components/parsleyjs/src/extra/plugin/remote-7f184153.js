window.ParsleyExtend=window.ParsleyExtend||{},window.ParsleyExtend=$.extend(window.ParsleyExtend,{asyncSupport:!0,asyncValidators:$.extend({"default":{fn:function(t){return"resolved"===t.state()},url:!1},reverse:{fn:function(t){return"rejected"===t.state()},url:!1}},window.ParsleyExtend.asyncValidators),addAsyncValidator:function(t,e,i,s){return this.asyncValidators[t.toLowerCase()]={fn:e,url:i||!1,options:s||{}},this},asyncValidate:function(){return"ParsleyForm"===this.__class__?this._asyncValidateForm.apply(this,arguments):this._asyncValidateField.apply(this,arguments)},asyncIsValid:function(){return"ParsleyField"===this.__class__?this._asyncIsValidField.apply(this,arguments):this._asyncIsValidForm.apply(this,arguments)},onSubmitValidate:function(t){var e=this;if(!0!==t.parsley)return this.submitEvent=$.extend(!0,{},t),t instanceof $.Event&&(t.stopImmediatePropagation(),t.preventDefault()),this._asyncValidateForm(void 0,t).done(function(){e.submitEvent.isDefaultPrevented()||e.$element.trigger($.extend($.Event("submit"),{parsley:!0}))})},eventValidate:function(t){new RegExp("key").test(t.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.asyncValidate())},_asyncValidateForm:function(t){var e=this,i=[];this._refreshFields(),$.emit("parsley:form:validate",this);for(var s=0;s<this.fields.length;s++)t&&t!==this.fields[s].options.group||i.push(this.fields[s]._asyncValidateField());return $.when.apply($,i).done(function(){$.emit("parsley:form:success",e)}).fail(function(){$.emit("parsley:form:error",e)}).always(function(){$.emit("parsley:form:validated",e)})},_asyncIsValidForm:function(t,e){var i=[];this._refreshFields();for(var s=0;s<this.fields.length;s++)t&&t!==this.fields[s].options.group||i.push(this.fields[s]._asyncIsValidField(e));return $.when.apply($,i)},_asyncValidateField:function(t){var e=this;return $.emit("parsley:field:validate",this),this._asyncIsValidField(t).done(function(){$.emit("parsley:field:success",e)}).fail(function(){$.emit("parsley:field:error",e)}).always(function(){$.emit("parsley:field:validated",e)})},_asyncIsValidField:function(t,e){var i=$.Deferred();return!1===this.isValid(t,e)?i.rejectWith(this):"undefined"!=typeof this.constraintsByName.remote?this._remote(i):i.resolveWith(this),i.promise()},_remote:function(t){var e,i,s=this,a={},n=this.options.remoteValidator||(!0===this.options.remoteReverse?"reverse":"default");if(n=n.toLowerCase(),"undefined"==typeof this.asyncValidators[n])throw new Error("Calling an undefined async validator: `"+n+"`");a[this.$element.attr("name")||this.$element.attr("id")]=this.getValue(),this.options.remoteOptions=$.extend(!0,this.options.remoteOptions||{},this.asyncValidators[n].options),e=$.extend(!0,{},{url:this.asyncValidators[n].url||this.options.remote,data:a,type:"GET"},this.options.remoteOptions||{}),i=$.param(e),"undefined"==typeof this._remoteCache&&(this._remoteCache={}),this._remoteCache[i]||(this._xhr&&"pending"===this._xhr.state()&&this._xhr.abort(),this._xhr=$.ajax(e),this._remoteCache[i]=this._xhr),this._remoteCache[i].done(function(e,i,a){s._handleRemoteResult(n,a,t)}).fail(function(e,i){"abort"!==i&&s._handleRemoteResult(n,e,t)})},_handleRemoteResult:function(t,e,i){return"function"==typeof this.asyncValidators[t].fn&&this.asyncValidators[t].fn.call(this,e)?void i.resolveWith(this):(this.validationResult=[new window.ParsleyValidator.Validator.Violation(this.constraintsByName.remote,this.getValue(),null)],void i.rejectWith(this))}}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.validators=window.ParsleyConfig.validators||{},window.ParsleyConfig.validators.remote={fn:function(){return!0},priority:-1};