define("parsley/pubsub",["parsley/field","parsley/form"],function(n,e){var t=$({}),i={};$.listen=function(n){if("undefined"==typeof i[n]&&(i[n]=[]),"function"==typeof arguments[1])return i[n].push({fn:arguments[1]});if("object"==typeof arguments[1]&&"function"==typeof arguments[2])return i[n].push({fn:arguments[2],ctxt:arguments[1]});throw new Error("Wrong parameters")},$.listenTo=function(t,f,r){if("undefined"==typeof i[f]&&(i[f]=[]),!(t instanceof n||t instanceof e))throw new Error("Must give Parsley instance");if("string"!=typeof f||"function"!=typeof r)throw new Error("Wrong parameters");i[f].push({instance:t,fn:r})},$.unsubscribe=function(n,e){if("undefined"!=typeof i[n]){if("string"!=typeof n||"function"!=typeof e)throw new Error("Wrong arguments");for(var t=0;t<i[n].length;t++)if(i[n][t].fn===e)return i[n].splice(t,1)}},$.unsubscribeTo=function(t,f){if("undefined"!=typeof i[f]){if(!(t instanceof n||t instanceof e))throw new Error("Must give Parsley instance");for(var r=0;r<i[f].length;r++)if("undefined"!=typeof i[f][r].instance&&i[f][r].instance.__id__===t.__id__)return i[f].splice(r,1)}},$.unsubscribeAll=function(n){"undefined"!=typeof i[n]&&delete i[n]},$.emit=function(f,r){if("undefined"!=typeof i[f])for(var o=0;o<i[f].length;o++)if("undefined"!=typeof i[f][o].instance){if(r instanceof n||r instanceof e)if(i[f][o].instance.__id__!==r.__id__){if(i[f][o].instance instanceof e&&r instanceof n)for(var s=0;s<i[f][o].instance.fields.length;s++)if(i[f][o].instance.fields[s].__id__===r.__id__){i[f][o].fn.apply(t,Array.prototype.slice.call(arguments,1));continue}}else i[f][o].fn.apply(t,Array.prototype.slice.call(arguments,1))}else i[f][o].fn.apply("undefined"!=typeof i[f][o].ctxt?i[f][o].ctxt:t,Array.prototype.slice.call(arguments,1))},$.subscribed=function(){return i}});